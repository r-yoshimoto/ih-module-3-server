(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(67)},37:function(e,t,a){},39:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(28),s=a.n(r),i=(a(37),a(38),a(2)),c=a(3),o=a(5),m=a(4),u=a(6),d=(a(39),a(14)),h=a(7),p=a.n(h),f=function e(){var t=this;Object(i.a)(this,e),this.signUp=function(e,a,n){return t.service.post("/signup",{fullName:e,password:a,email:n}).then(function(e){return e.data})},this.resendConfirmation=function(e){return t.service.get("/confirm/resend/".concat(e)).then(function(e){return e.data})},this.editProfile=function(e){return t.service.post("/editprofile",{fullName:e}).then(function(e){return e.data})},this.confirmEmail=function(e){return t.service.get("/confirm/".concat(e)).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{email:e,password:a}).then(function(e){return e.data})},this.logout=function(){return t.service.post("/logout",{}).then(function(e){return e.data})},this.service=p.a.create({baseURL:"".concat("https://ih-module-3-rpy.herokuapp.com","/api"),withCredentials:!0})},E=a(29),g=a(1),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).logoutUser=function(){a.service.logout().then(function(){a.setState({loggedInUser:null}),a.props.getUser(null)})},a.state={loggedInUser:null},a.service=new f,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},this.state,{loggedInUser:e.userInSession,name:e.name}))}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?l.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement(g.b,{className:"navbar-item",to:"/"},l.a.createElement("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})),l.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},l.a.createElement("span",{"aria-hidden":"true"}),l.a.createElement("span",{"aria-hidden":"true"}),l.a.createElement("span",{"aria-hidden":"true"}))),l.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},l.a.createElement("div",{className:"navbar-start"},l.a.createElement(g.b,{className:"navbar-item",to:"/offers"},"My Offers"),l.a.createElement(g.b,{className:"navbar-item",to:"/orders"},"Orders"),l.a.createElement(g.b,{className:"navbar-item",to:"/buy"},"Buy")),l.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},l.a.createElement("div",{className:"navbar-start"}),l.a.createElement("div",{className:"navbar-end"},l.a.createElement("div",{className:"navbar-item"},"Hi, ",this.state.name),l.a.createElement("div",{className:"navbar-item"},l.a.createElement("div",{className:"buttons"},l.a.createElement(g.b,{className:"button is-warning",to:"/edit-profile"},"Edit Profile "),l.a.createElement("button",{className:"button is-danger",onClick:function(){return e.logoutUser()}},"Logout"))))))):l.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement("a",{className:"navbar-item",href:"#"},l.a.createElement("img",{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"})),l.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},l.a.createElement("span",{"aria-hidden":"true"}),l.a.createElement("span",{"aria-hidden":"true"}),l.a.createElement("span",{"aria-hidden":"true"}))),l.a.createElement("div",{className:"navbar-end"},l.a.createElement("div",{className:"navbar-item"},l.a.createElement("div",{className:"buttons"},l.a.createElement(g.c,{className:"button is-primary",to:"/signup"},l.a.createElement("strong",null,"Sign up")),l.a.createElement(g.c,{className:"button is-light",to:"/login"},"Log in")))))}}]),t}(n.Component),v=a(9),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleResend=function(e){e.preventDefault();var t=a.state.token;a.service.resendConfirmation(t).then(function(e){a.setState({token:null,message:"".concat(e.message)})}).catch(function(e){console.log(e),a.setState({message:"".concat(e.response.data.message)})})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,l=t.password;a.service.login(n,l).then(function(e){a.setState({email:"",password:"",loggedInUser:!0}),a.props.getUser(e.userDetail)}).catch(function(e){a.setState({token:e.response.data.token?"".concat(e.response.data.token):null,message:"".concat(e.response.data.message)})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(v.a)({},n,l))},a.state={email:"",password:"",message:a.props.location.state?a.props.location.state.message:null},a.service=new f,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.loggedInUser?l.a.createElement(d.a,{to:{pathname:"/"}}):l.a.createElement("section",{className:"section"},l.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"email"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",name:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),this.state.message&&!!this.state.token&&l.a.createElement("article",{className:"message is-warning"},l.a.createElement("div",{className:"message-header"},l.a.createElement("p",null,"System Message")),l.a.createElement("div",{className:"message-body"},l.a.createElement("strong",null,this.state.message," ",l.a.createElement("a",{href:"#",onClick:this.handleResend},"Click here to resend.")))),this.state.message&&!this.state.token&&l.a.createElement("article",{className:"message is-warning"},l.a.createElement("div",{className:"message-header"},l.a.createElement("p",null,"System Message")),l.a.createElement("div",{className:"message-body"},l.a.createElement("strong",null,this.state.message))),l.a.createElement("div",{className:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("button",{type:"submit",className:"button is-link"},"Login")),l.a.createElement("div",{className:"control"},l.a.createElement("button",{type:"reset",className:"button is-text"},"Cancel")))),l.a.createElement("div",{className:"section"},l.a.createElement("h6",{className:"subtitle is-6"},"Don't have account?",l.a.createElement("br",null),l.a.createElement(g.b,{className:"button",to:"/signup"},"Signup"))))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.fullName,n=a.state.password,l=a.state.email;a.service.signUp(t,n,l).then(function(e){a.setState({fullName:"",password:"",email:""}),a.props.getUser(e)}).catch(function(e){a.setState({message:"".concat(e.response.data.message)})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(v.a)({},n,l))},a.state={fullName:"",email:"",password:"",message:null},a.service=new f,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("section",{className:"section"},l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"E-mail"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",name:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Full Name"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",name:"fullName",value:this.state.fullName,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),this.state.message&&l.a.createElement("article",{className:"message is-warning"},l.a.createElement("div",{className:"message-header"},l.a.createElement("p",null,"System Message")),l.a.createElement("div",{className:"message-body"},l.a.createElement("strong",null,this.state.message))),l.a.createElement("div",{classNameName:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("button",{type:"submit",className:"button is-link"},"Sign up")),l.a.createElement("div",{className:"control"},l.a.createElement("button",{type:"reset",className:"button is-text"},"Cancel")))),l.a.createElement("div",{className:"section"},l.a.createElement("h6",{className:"subtitle is-6"},"Do you have an account?",l.a.createElement("br",null),l.a.createElement(g.b,{className:"button",to:"/login"},"Login"))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={emailToken:e.match.params.token},a.service=new f,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=this,t=this.state.emailToken;this.service.confirmEmail(t).then(function(t){console.log(t),e.setState({message:"".concat(t.message)})}).catch(function(t){e.setState({message:"".concat(t.response.data.message)})})}},{key:"render",value:function(){return this.state.message?l.a.createElement(d.a,{to:{pathname:"/login",state:{message:this.state.message}}}):l.a.createElement("h1",null,"Loading")}}]),t}(n.Component),j=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("h1",null,"Joc chato.")}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.title,n=a.state.description,l=a.state.price,r=a.state.unity,s=a.state.minimum,i=a.state.category;p.a.post("".concat("https://ih-module-3-rpy.herokuapp.com","/api/offers"),{title:t,description:n,price:l,unity:r,minimum:s,category:i},{withCredentials:!0}).then(function(){a.props.getData(),a.setState({title:"",description:"",price:"",unity:"",minimum:"",category:""})}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(v.a)({},n,l))},a.state={title:"",description:"",price:"",unity:"",minimum:"",category:"Fruits",owner:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"Add an Item"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Title"),l.a.createElement("input",{className:"input",type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Description"),l.a.createElement("textarea",{className:"textarea",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Price"),l.a.createElement("input",{className:"input",type:"number",name:"price",value:this.state.price,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Unity"),l.a.createElement("input",{className:"input",type:"text",name:"unity",value:this.state.unity,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Minimum"),l.a.createElement("input",{className:"input",type:"number",name:"minimum",value:this.state.minimum,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Category"),l.a.createElement("div",{className:"select"},l.a.createElement("select",{name:"category",value:this.state.category,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",{value:"Fruits"},"Fruits"),l.a.createElement("option",{value:"Flowers"},"Flowers"),l.a.createElement("option",{value:"Fish"},"Fish"),l.a.createElement("option",{value:"Vegetables"},"Vegetables"),l.a.createElement("option",{value:"None of above"},"None of above")))),l.a.createElement("div",{className:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"button is-link",type:"submit",value:"Add New Item"})))))}}]),t}(n.Component),w=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).getAllOffers=function(){p.a.get("".concat("https://ih-module-3-rpy.herokuapp.com","/api/offers"),{withCredentials:!0}).then(function(t){e.setState({listOfOffers:t.data})})},e.state={listOfOffers:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAllOffers()}},{key:"render",value:function(){var e=this;return this.props.loggedInUser?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("div",{className:"list is-hoverable"},l.a.createElement("p",{className:"title"},"My Offers"),this.state.listOfOffers.map(function(t){if(t.owner&&t.owner._id===e.props.loggedInUser._id)return l.a.createElement("div",{key:t._id},l.a.createElement(g.b,{className:"list-item",to:"/offers/".concat(t._id)},l.a.createElement("h3",null,t.title)))}))),l.a.createElement("div",{className:"column is-half"},l.a.createElement(C,{getData:function(){return e.getAllOffers()}})))):l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("div",{className:"list is-hoverable"},this.state.listOfOffers.map(function(e){return l.a.createElement("div",{key:e._id},l.a.createElement(g.b,{className:"list-item",to:"/offers/".concat(e._id)},l.a.createElement("h3",null,e.title)))})))))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){var t=a.state.title,n=a.state.description,l=a.state.price,r=a.state.unity,s=a.state.minimum,i=a.state.category;e.preventDefault(),p.a.put("".concat("https://ih-module-3-rpy.herokuapp.com","/api/offers/").concat(a.props.theOffer._id),{title:t,description:n,price:l,unity:r,minimum:s,category:i},{withCredentials:!0}).then(function(){a.props.getTheOffer(),a.props.history.push("/offers")}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(v.a)({},n,l))},a.state={title:a.props.theOffer.title,description:a.props.theOffer.description,price:a.props.theOffer.price,unity:a.props.theOffer.unity,minimum:a.props.theOffer.minimum,category:a.props.theOffer.category,owner:a.props.theOffer.owner},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("p",{className:"title"},"Edit item"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Title:"),l.a.createElement("input",{className:"input",type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Description:"),l.a.createElement("textarea",{className:"textarea",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Price:"),l.a.createElement("input",{className:"input",type:"number",name:"price",value:this.state.price,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Unity:"),l.a.createElement("input",{className:"input",type:"text",name:"unity",value:this.state.unity,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Minimum:"),l.a.createElement("input",{className:"input",type:"number",name:"minimum",value:this.state.minimum,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Category:"),l.a.createElement("div",{className:"select"},l.a.createElement("select",{name:"category",value:this.state.category,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",{value:"Fruits"},"Fruits"),l.a.createElement("option",{value:"Flowers"},"Flowers"),l.a.createElement("option",{value:"Fish"},"Fish"),l.a.createElement("option",{value:"Vegetables"},"Vegetables"),l.a.createElement("option",{value:"None of above"},"None of above")))),l.a.createElement("div",{className:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"button is-link",type:"submit",value:"Submit"})))))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).getSingleOffer=function(){var e=a.props.match.params;p.a.get("".concat("https://ih-module-3-rpy.herokuapp.com","/api/offers/").concat(e.id),{withCredentials:!0}).then(function(e){var t=e.data;a.setState(t)}).catch(function(e){console.log(e)})},a.renderEditForm=function(){if(a.state.title)return l.a.createElement(k,Object.assign({theOffer:a.state,getTheOffer:a.getSingleOffer},a.props));a.getSingleOffer()},a.deleteOffer=function(){var e=a.props.match.params;p.a.delete("".concat("https://ih-module-3-rpy.herokuapp.com","/api/offers/").concat(e.id),{withCredentials:!0}).then(function(){a.props.history.push("/offers")}).catch(function(e){console.log(e)})},a.ownershipCheck=function(e){if(console.log(a.props.loggedInUser),console.log(e.owner),e.owner._id===a.props.loggedInUser._id)return l.a.createElement("div",null,l.a.createElement("div",null,a.renderEditForm()," "),l.a.createElement("div",{className:"field is-group"},l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-danger",onClick:function(){return a.deleteOffer(a.state._id)}},"Delete offer"))))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.title,n=a.state.description,l=a.state.price,r=a.state.unity,s=a.state.minimum,i=a.state.category,c=a.state.total,o=a.state.totalPrice,m=a.state.owner._id;console.log(m),p.a.post("".concat("https://ih-module-3-rpy.herokuapp.com","/api/orders"),{title:t,description:n,price:l,unity:r,minimum:s,category:i,total:c,totalPrice:o,owner:m},{withCredentials:!0}).then(function(){a.props.history.push("/orders")}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(v.a)({},n,l),function(){a.setState({totalPrice:a.state.price*a.state.total})})},a.state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getSingleOffer()}},{key:"render",value:function(){var e=this;return this.state.owner?this.state.owner._id===this.props.loggedInUser._id?l.a.createElement("div",null,l.a.createElement("div",null,this.ownershipCheck(this.state)),l.a.createElement(g.b,{to:"/offers"},"Back to offers")):l.a.createElement("div",null,l.a.createElement("div",{className:"column is-half"},l.a.createElement("p",{className:"title is-3"},this.state.title),l.a.createElement("p",{className:"title is-4"},"Description:"),l.a.createElement("p",{className:"subtitle is-5"},this.state.description),l.a.createElement("p",{className:"title is-4"},"Unity:"),l.a.createElement("p",{className:"subtitle is-5"}," ",this.state.unity),l.a.createElement("p",{className:"title is-4"},"Minimum Quantity:"),l.a.createElement("p",{className:"subtitle is-5"}," ",this.state.minimum),l.a.createElement("p",{className:"title is-4"},"Category:"),l.a.createElement("p",{className:"subtitle is-5"}," ",this.state.category),l.a.createElement("p",{className:"title is-4"},"Seller:"),l.a.createElement("p",{className:"subtitle is-5"}," ",this.state.owner.fullName),l.a.createElement("p",{className:"title is-4"},"Unity Price:"),l.a.createElement("p",{className:"subtitle is-5"}," ",this.state.price,"$"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("input",{type:"hidden",name:"title",value:this.state.title}),l.a.createElement("input",{type:"hidden",name:"description",value:this.state.description}),l.a.createElement("input",{type:"hidden",name:"price",value:this.state.price}),l.a.createElement("input",{type:"hidden",name:"unity",value:this.state.unity}),l.a.createElement("input",{type:"hidden",name:"minimum",value:this.state.minimum}),l.a.createElement("input",{type:"hidden",name:"category",value:this.state.category}),l.a.createElement("input",{type:"hidden",name:"owner",value:this.state.owner._id}),l.a.createElement("label",{className:"title is-4 is-spaced"},"Quantity:"),l.a.createElement("input",{className:"input",type:"number",min:"0",name:"total",value:this.state.total,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("label",{className:"title is-3 is-spaced"},"Total Price: ",this.state.totalPrice,"$"),l.a.createElement("p",null,l.a.createElement("input",{className:"button is-link",type:"submit",value:"Purchase"}))))):l.a.createElement("div",null,"XX")}}]),t}(n.Component),S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).getAllOrders=function(){p.a.get("".concat("https://ih-module-3-rpy.herokuapp.com","/api/orders"),{withCredentials:!0}).then(function(t){e.setState({listOfOrders:t.data})})},e.ownershipCheck=function(t){if(console.log(e.props.loggedInUser),console.log(t.owner),console.log(t.buyer),t.owner._id===e.props.loggedInUser._id)return l.a.createElement("div",null,l.a.createElement("div",null,e.renderEditForm()," "),l.a.createElement("button",{onClick:function(){return e.deleteOffer(e.state._id)}},"Delete offer"))},e.state={listOfOrders:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAllOrders()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{style:{width:"60%",float:"left"}},this.state.listOfOrders.map(function(t){if(t.buyer&&t.owner&&(t.owner._id===e.props.loggedInUser._id||t.buyer._id===e.props.loggedInUser._id))return l.a.createElement("div",{key:t._id},l.a.createElement(g.b,{to:"/orders/".concat(t._id)},l.a.createElement("h3",null,t._id)))})))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).getSingleOrder=function(){var e=a.props.match.params;p.a.get("".concat("https://ih-module-3-rpy.herokuapp.com","/api/orders/").concat(e.id),{withCredentials:!0}).then(function(e){var t=e.data;a.setState(t)}).catch(function(e){console.log(e)})},a.ownershipCheck=function(e){return l.a.createElement("div",null,l.a.createElement("div",null,a.renderEditForm()," "),l.a.createElement("button",{onClick:function(){return a.deleteOffer(a.state._id)}},"Delete offer"))},a.state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getSingleOrder()}},{key:"render",value:function(){return this.state.owner?this.state.buyer?l.a.createElement("div",null,l.a.createElement("h1",null,this.state.title),l.a.createElement("p",null,this.state.description),l.a.createElement("p",null,this.state.price),l.a.createElement("p",null,this.state.unity),l.a.createElement("p",null,this.state.minimum),l.a.createElement("p",null,this.state.category),l.a.createElement("p",null,this.state.total),l.a.createElement("p",null,this.state.totalPrice),l.a.createElement("p",null,this.state.status),l.a.createElement("p",null,this.state.owner.fullName),l.a.createElement("p",null,this.state.buyer.fullName),l.a.createElement(g.b,{to:"/orders"},"Back to orders")):void 0:l.a.createElement("div",null,"XX")}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.fullName,n=a.state.password,l=a.state.email;a.service.editProfile(t,n,l).then(function(e){a.setState({fullName:"",password:"",email:""}),a.props.getUser(e)}).catch(function(e){console.log(e),a.setState({message:"".concat(e.response.data.message)})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(v.a)({},n,l))},a.state={fullName:a.props.loggedInUser.fullName,message:null},a.service=new f,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("section",{className:"section"},this.state.message&&l.a.createElement("article",{className:"message is-warning"},l.a.createElement("div",{className:"message-header"},l.a.createElement("p",null,"System Message")),l.a.createElement("div",{className:"message-body"},l.a.createElement("strong",null,this.state.message))),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Full Name"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",name:"fullName",value:this.state.fullName,onChange:function(t){return e.handleChange(t)}}))),l.a.createElement("div",{classNameName:"field is-grouped"},l.a.createElement("div",{className:"control"},l.a.createElement("button",{type:"submit",className:"button is-link"},"Save Changes")))))}}]),t}(n.Component),F=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).getAllOffers=function(){p.a.get("".concat("https://ih-module-3-rpy.herokuapp.com","/api/offers"),{withCredentials:!0}).then(function(t){e.setState({listOfOffers:t.data})})},e.state={listOfOffers:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAllOffers()}},{key:"render",value:function(){var e=this;return this.props.loggedInUser?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("div",{className:"list is-hoverable"},l.a.createElement("p",{className:"title"},"Offers"),l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("abbr",{title:"Title"},"Title")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"Price"},"Price")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"WUnity"},"Unity")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"Minimum<"},"Minimum")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"Category"},"Category")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"Seller"},"Seller")))),l.a.createElement("tbody",null,this.state.listOfOffers.map(function(t){if(t.owner&&t.owner._id!==e.props.loggedInUser._id)return l.a.createElement("tr",{key:t._id,className:"is-selected"},l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(t._id)},l.a.createElement("h3",null,t.title))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(t._id)},l.a.createElement("h3",null,"$",t.price))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(t._id)},l.a.createElement("h3",null,t.unity))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(t._id)},l.a.createElement("h3",null,t.minimum))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(t._id)},l.a.createElement("h3",null,t.category))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(t._id)},l.a.createElement("h3",null,t.owner.fullName))))}))))))):l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("div",{className:"list is-hoverable"},l.a.createElement("p",{className:"title"},"Offers"),l.a.createElement("table",{class:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("abbr",{title:"Title"},"Title")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"Price"},"Price")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"WUnity"},"Unity")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"Minimum<"},"Minimum")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"Category"},"Category")),l.a.createElement("th",null,l.a.createElement("abbr",{title:"Seller"},"Seller")))),l.a.createElement("tbody",null,this.state.listOfOffers.map(function(e){if(e.owner)return l.a.createElement("tr",{key:e._id,className:"is-selected"},l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(e._id)},l.a.createElement("h3",null,e.title))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(e._id)},l.a.createElement("h3",null,"$",e.price))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(e._id)},l.a.createElement("h3",null,e.unity))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(e._id)},l.a.createElement("h3",null,e.minimum))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(e._id)},l.a.createElement("h3",null,e.category))),l.a.createElement("th",null,l.a.createElement(g.b,{to:"/offers/".concat(e._id)},l.a.createElement("h3",null,e.owner.fullName))))})))))))}}]),t}(n.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("h1",null,"To buy something you need to be logged in. Please login or signup")}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).fetchUser=function(){null===a.state.loggedInUser&&a.service.loggedin().then(function(e){a.setState({loggedInUser:e,name:e.fullName.split(" ")[0]})}).catch(function(e){a.setState({loggedInUser:!1})})},a.getTheUser=function(e){a.setState({loggedInUser:e})},a.state={loggedInUser:null},a.service=new f,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?l.a.createElement("section",null,l.a.createElement(b,{userInSession:this.state.loggedInUser,name:this.state.name,getUser:this.getTheUser}),l.a.createElement(d.d,null,l.a.createElement(d.b,{exact:!0,path:"/",component:j}),l.a.createElement(d.b,{exact:!0,path:"/edit-profile",render:function(){return l.a.createElement(_,{loggedInUser:e.state.loggedInUser,getUser:e.getTheUser})}}),l.a.createElement(d.b,{path:"/offers/:id",render:function(t){return l.a.createElement(U,Object.assign({loggedInUser:e.state.loggedInUser},t))}}),l.a.createElement(d.b,{path:"/offers",render:function(t){return l.a.createElement(w,Object.assign({loggedInUser:e.state.loggedInUser},t))}}),l.a.createElement(d.b,{path:"/buy",render:function(t){return l.a.createElement(F,Object.assign({loggedInUser:e.state.loggedInUser},t))}}),l.a.createElement(d.b,{path:"/orders/:id",render:function(t){return l.a.createElement(I,Object.assign({loggedInUser:e.state.loggedInUser},t))}}),l.a.createElement(d.b,{path:"/orders",render:function(t){return l.a.createElement(S,Object.assign({loggedInUser:e.state.loggedInUser},t))}}))):l.a.createElement("section",null,l.a.createElement(b,{userInSession:this.state.loggedInUser,getUser:this.getTheUser}),l.a.createElement(d.d,null,l.a.createElement(d.b,{exact:!0,path:"/signup",render:function(){return l.a.createElement(y,{getUser:e.getTheUser})}}),l.a.createElement(d.b,{exact:!0,path:"/confirm/:token",render:function(t){return l.a.createElement(O,Object.assign({getUser:e.getTheUser},t))}}),l.a.createElement(d.b,{exact:!0,path:"/login",render:function(t){return l.a.createElement(N,Object.assign({getUser:e.getTheUser},t))}}),l.a.createElement(d.b,{path:"/offers/:id",component:x}),l.a.createElement(d.b,{path:"/buy",component:F})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(g.a,null,l.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.f305b1c1.chunk.js.map